# TTS测试记录平台（多人收集版）

本版本重点：

- 基础信息按“测试人/账号”管理为设备档案
- 课程名从基础信息拆出，每条问题记录单独填写
- 支持设备档案折叠、修改、删除

## 收集页面

### A. 基础信息（个人设备档案）

- 字段：测试人/账号、设备、系统
- 规则：
  - 保存后可折叠/展开
  - 输入某个测试人后，只显示该测试人的设备档案
  - 可对设备档案执行：
    - 使用该档案
    - 保存修改（设备/系统）
    - 删除档案

说明：删除设备档案时，会同步删除该档案下的历史问题记录（Supabase依赖级联删除）。

### B. 问题收集

- 字段：课程名（必填）、问题描述（必填）、标签（至少1个）、主观感受（至少1个）
- 标签规则：文本标签和TTS标签任意选中一个即可提交
- 自动分类：按标签+描述关键词自动分为文本问题或TTS问题
- 支持语音录入问题描述（浏览器支持时可用）

主观感受多选项：

- 我能感受到小白的惊讶、好奇、悲伤、和不同程度的鼓励情绪
- 偶尔能感觉到情绪
- 整体情绪平稳没什么感觉
- 其他（展开填写）

## 收集结果页面

- 统计：总问题数、文本问题数、TTS问题数
- 筛选：
  - 课程
  - 测试人
  - 分类
  - 标签
  - 关键词（课程/描述/标签/主观感受）
  - 日期范围
- 支持手动刷新与 CSV 导出

## 分析总结页面

- 分析窗口：最近7天 / 最近30天 / 全量数据
- 自动统计：
  - 问题总量
  - 文本占比 / TTS占比
  - 与上一周期对比（7天或30天）
- 排行分析：
  - 高频标签 TOP5
  - 高频课程 TOP5
  - 主观感受 TOP5
- 趋势分析：每日问题数量趋势
- 一键总结：自动生成复盘文案，可直接复制到周报或群消息

## 标签

- 文本标签：夸奖密度过高、反馈力度失衡、口语词不自然、文本表达别扭、其他
- TTS标签：发音错误、断句停顿不合理、重读异常、连读/吞音、语速异常、噪声/毛刺、其他

## 快速启动

```bash
npm install
npm run dev -- --host
```

## 数据模式

### 本地模式（无需 Supabase）

- 可直接保存/提交
- 数据仅在当前浏览器 LocalStorage 中
- 适合单人预览

### 多人模式（推荐）

1. 复制环境变量文件：

```bash
cp .env.example .env
```

2. 填写：

```bash
VITE_SUPABASE_URL=...
VITE_SUPABASE_ANON_KEY=...
```

3. 在 Supabase SQL Editor 执行：

- `supabase/schema.sql`

4. 启动：

```bash
npm run dev -- --host
```

## 发布给同事

推荐 GitHub Pages（本项目已内置自动发布工作流）：

1. 在仓库 `Settings` -> `Secrets and variables` -> `Actions` 中配置：
   - Repository Variable: `VITE_SUPABASE_URL`
   - Repository Secret: `VITE_SUPABASE_ANON_KEY`
2. 在仓库 `Settings` -> `Pages` 中把 Source 设为 `GitHub Actions`
3. 推送代码到 `main` 分支后，GitHub Actions 会自动构建并发布
4. 对外访问地址：
   - `https://gyy-r.github.io/tts-qa-recorder/`

如果只想先看页面（不连接 Supabase），可以不配置这两个变量，页面会进入本地模式。

## 周复盘建议

每周复盘建议流程：

1. 先按日期范围过滤
2. 再按课程过滤
3. 看文本/TTS占比
4. 按标签和关键词定位高频问题
5. 导出 CSV 归档

## 数据表

- `sessions`: 测试人/账号、设备、系统、创建时间
- `observations`: 课程名、分类、标签、问题描述、主观感受、创建时间
